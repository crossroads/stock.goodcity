<div class="row detail-section">
  <div class="columns small-12">
    <div class="row">
      <div class="columns small-3">
        {{t "item_details.type"}}
     </div>
      <div class="columns small-9" >
        <div {{action "updatePackageType"}}>
          {{input value=item.code.name class="item-type-withbg" disabled=true}}
       </div>
      </div>
    </div>
  </div>

  <div class="columns small-12">
    <div class="row">
      <div class="columns small-3">
        {{t 'item_details.description'}}
      </div>
      <div class="columns small-6 description">
        {{#form-control}}
          {{item-description-textarea data-autoresize=true name="notes" value=item.notes noCss="true" class="description-textarea-withbg" required="required" id=(concat 'desc' item.id) pattern=".*\S.*" item=item}}
          <div class='description-error-withbg'>
            {{t 'item_details.validation_errors.description'}}
          </div>
        {{/form-control}}
      </div>
      <div class="columns small-3">
        {{#link-to 'items.edit_images' item.id}}
          <img src={{item.thumbImageUrl}} class="thumb" />
        {{/link-to}}
      </div>
    </div>
  </div>

  <div class="columns small-12">
    <div class="row">
      <div class="columns small-3">{{t 'item_details.quality'}} </div>
      <div class="columns small-3  quality">
        <div class="select-quality">
          <span class='input_text'>{{t 'item_details.grade'}}</span>
          {{inline-select-list
            content=grades
            on-change=(action "onGradeChange")
            name="grade"
            autosave=true
            isPrimitive=true
            id=(concat 'grd' item.id)
            class="grade-margin"
            item=item}}
        </div>
      </div>
      <div class="columns small-6  condition-field">
        <div class="select-condition">
          <span class='input_text'>{{t 'item_details.condition'}}</span>
          {{inline-select-list
          content=conditions
          on-change=(action "onConditionChange")
          name="donorCondition"
          item=item
          autosave=true
          id=(concat 'cnd' item.id)
          class="condition-margin"}}
        </div>
      </div>
    </div>

    <div class="row">
      <div class="columns large-3 small-3">{{t 'items.value'}} </div>
      <div class="columns large-3 small-3 ">
        {{numeric-inline-input name="value_hk_dollar"
          value=valueHkDollar
          maxlength="6"
          acceptFloat=true
          item=item
          class='numeric-input valuation-input'
          onFocusIn=(action 'setValuationIsFocused' true)
          onFocusOut=(action 'setValuationIsFocused' false)
          }}
      </div>
      <div class="columns large-6 small-6">
        {{#if canApplyDefaultValuation}}
          <span {{action "applyDefaultItemValuation"}} class="default-content">
            {{t "items.apply_default"}} {{defaultValueHkDollar}}
          </span>
        {{/if}}
      </div>
    </div>

    <div class="row">
      <div class="columns small-3 dimension">{{t "item_details.size"}}</div>
      <div class="columns small-3">
        <div class="item-type-withbg item-dimension-withbg" >
          &nbsp;&nbsp;L :
          {{numeric-inline-input id=(concat 'qty' item.id) name="length" class="numeric-input item-length item-type-withbg small-3" value=item.length maxlength="5" item=item}}
       </div>
      </div>
      <div class="columns small-3">
        <div class="item-type-withbg item-dimension-withbg">
          &nbsp;W :
          {{numeric-inline-input id=(concat 'wth' item.id) name="width" class="numeric-input item-width item-type-withbg small-3" value=item.width maxlength="5"  item=item}}
        </div>
       </div>
      <div class="columns small-3">
        <div class="item-type-withbg item-dimension-withbg">
          &nbsp;H :
          {{numeric-inline-input id=(concat 'hgt' item.id) name="height" class="numeric-input item-height item-type-withbg small-3" value=item.height maxlength="5" item=item}}
       </div>
      </div>
    </div>

    <div class="row weight-pieces">
      <div class="columns small-3">
        <span class='input_text'>
          {{t 'item_details.weight'}}
        </span>
      </div>
      <div class="columns small-3 weight">
        {{numeric-inline-input
        id=(concat 'wgt' item.id)
        name="weight"
        class='numeric-input valuation-input'
        value=item.weight
        maxlength="9"
        item=item}}
      </div>
      {{#if showPieces}}
        <div class="columns small-3">
          <span class='input_text'>{{t 'item_details.pieces'}}</span>
        </div>
        <div class="columns small-3 pieces">
          {{numeric-inline-input
          id=(concat 'pcs' item.id)
          name="pieces"
          class='numeric-input valuation-input'
          value=item.pieces
          maxlength="9"
          item=item}}
        </div>
      {{/if}}
    </div>

    {{#if item.code.allowExpiryDate}}
      <div class="row weight-pieces">
        <div class="columns small-3">
          <span class='input_text'>{{t "items.new.expiry_date"}}</span>
        </div>
        <div class="columns small-6 value pieces">
          {{date-picker
            name="expiry_date"
            id="expiry_date"
            value=expiryDate
            enablePreviousDate=true
            onSelect=(action 'setExpiryDate')
          }}
        </div>
      </div>
    {{/if}}

    <div class="row weight-pieces">
      <div class="columns small-3">
        <span class='input_text'>Offers</span>
      </div>
      <div class="columns small-9 offer-tags">
        <div{{action 'addOffer'}}>
          {{fa-icon 'plus-square' size='2x'}}
        </div>
        <span class="offer-tag-detail">
          {{#if item.offer}}
            {{offer-tag
              class="offer-tag-withbg"
              isPackageOffer=false
              offer=item.offer
              removeOffer=(action "removeOffer")
            }}
         {{/if}}
          {{#each item.offersPackages as |offersPackage|}}
            {{offer-tag
              class="offer-tag-withbg"
              offer=offersPackage.offer
              removeOffer=(action "removeOffer")
            }}
          {{/each}}
        </span>
      </div>
    </div>

    <div class="row  constraints-row">
      <div class="columns small-3">{{t 'item_details.constraints'}}</div>
      <div class="columns small-3 quality constraints">
        <div class="select-quality">
          {{inline-select-list
            content=saleableOptions
            name="saleableValue"
            autosave=true
            isPrimitive=true
            on-change=(action 'onSaleableChange')
            class="constraints-saleable"
            item=item}}
        </div>
      </div>
      <div class="columns small-6 quality constraints">
        <div class="select-quality">
          {{inline-select-list
            content=restrictionOptions
            name="restriction"
            item=item
            class="constraints-restrictions"
            autosave=true
            on-change=(action 'onRestrictionChange')
          }}
        </div>
      </div>
    </div>

    <div class="row">
      {{donation-field item=item noCss="true" caseNumber=item.caseNumber}}
    </div>
  </div>
</div>
<hr>

{{#if showAdditionalFields}}
  <div class="row additional-selected-values">
    {{#each displayFields as |field|}}
      <div class="small-6 columns input-field-container">
        <div class="row">
          <div class="small-12 columns item-label">
            {{field.label}}
          </div>
          <div class="small-12 columns left">
            {{#form-control}}
              {{#if (is-and field.autoComplete (is-not-equal field.name 'country'))}}
                {{dropdown-search
                addAble=field.addAble
                displayPage=true
                selectedValuesDisplay=selectedValuesDisplay
                packageDetails=subFormDetails
                content=field.name onSetValue=(action 'updateFields')
                detailType=item.detailType detailId=item.detail.id}}
              {{else if (is-equal field.name 'country')}}
                <div class="dropdown-wrapper">
                  {{searchable-select
                  content=resultArray
                  sortBy="name"
                  isClearable=false
                  optionLabelKey="nameEn"
                  on-change=(action "setCountryValue")
                  selected=selectedCountry
                  prompt=""
                  on-open=(action "openDropDown")
                  on-search=(action "onSearch" "country")}}
                </div>
              {{else}}
                {{additional-fields-input
                  id=field.name
                  name=field.name
                  type="text"
                  class="inline-input additional-input"
                  value=(mut (get (get selectedValuesDisplay field.name) 'tag'))
                  item=item detailType=item.detailType
                  detailId=item.detail.id onFocusOut=(action 'updateFields')}}
              {{/if}}
            {{/form-control}}
          </div>
        </div>
      </div>
    {{/each}}
  </div>
{{/if}}
